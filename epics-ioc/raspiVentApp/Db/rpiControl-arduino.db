#Vinsp(0-255);Vexp(0-255);buzzer_pitch(0-255);buzzer_vol(0-255);status(0-1);resv1(0-255);resv2(0-255)\n


record(calc, "$(P)$(R)TIME-COUNTER-MSG") {
    field(DESC, "0.1 s counter")
    field(INPA, "$(P)$(R)TIME-COUNTER")
    field(INPB, "$(P)$(R)RR-MAXTIME NPP MS")
    field(SCAN, ".05 second")
    field(CALC, "(A>=B)? 0 : A + 0.05")
    field(VAL, "0")
    field(FLNK, "$(P)$(R)Set-Vinsp")
    field(FLNK, "$(P)$(R)Set-Vexp")
    field(FLNK, "$(P)$(R)Set-BuzzPitch")
    field(FLNK, "$(P)$(R)Set-BuzzVol")
    field(FLNK, "$(P)$(R)Set-InspExpState")
#    field(FLNK, "$(P)$(R)MessageOut")
}
record(longout,"$(P)$(R)Set-Vinsp"){
    field(DESC,"Set Inspiratory Valve")
#    field(DTYP,"stream")
#    field(OUT, "@arduino.proto SetVinsp $(PORT)")
    field(SCAN, ".05 second")
#    field(PREC,"0")
    field(EGU,"")
    field(VAL,"0")
    field(DRVH,"255")
    field(DRVL,"0")
    field(HOPR,"255")
    field(LOPR,"0")
}
record(longout,"$(P)$(R)Set-Vexp"){
    field(DESC,"Set Expiratory Valve")
#    field(DTYP,"stream")
#    field(OUT, "@arduino.proto SetVexp $(PORT)")
    field(SCAN, ".05 second")
#    field(PREC,"0")
    field(EGU,"")
    field(VAL,"0")
    field(DRVH,"255")
    field(DRVL,"0")
    field(HOPR,"255")
    field(LOPR,"0")
}
record(longout,"$(P)$(R)Set-BuzzPitch"){
    field(DESC,"Set Buzzer Pitch")
#    field(DTYP,"stream")
#    field(OUT, "@arduino.proto SetBuzzPitch $(PORT)")
    field(SCAN, ".05 second")
#    field(PREC,"0")
    field(EGU,"")
    field(VAL,"0")
    field(DRVH,"255")
    field(DRVL,"0")
    field(HOPR,"255")
    field(LOPR,"0")
}
record(longout,"$(P)$(R)Set-BuzzVol"){
    field(DESC,"Set Buzzer Volume")
#    field(DTYP,"stream")
#    field(OUT, "@arduino.proto SetBuzzVol $(PORT)")
    field(SCAN, ".05 second")
#    field(PREC,"0")
    field(EGU,"")
    field(VAL,"0")
    field(DRVH,"255")
    field(DRVL,"0")
    field(HOPR,"255")
    field(LOPR,"0")
}
record(longout,"$(P)$(R)Set-InspExpState"){
    field(DESC,"Set Inspiration/Experiation")
#    field(DTYP,"stream")
#    field(OUT, "@arduino.proto SetState $(PORT)")
    field(SCAN, ".05 second")
#    field(PREC,"0")
    field(EGU,"")
    field(VAL,"0")
    field(DRVH,"255")
    field(DRVL,"0")
    field(HOPR,"255")
    field(LOPR,"0")
}
record (calcout, "$(P)$(R)MessageOut") {
  field (INPA, "$(P)$(R)Set-Vinsp")
  field (INPB, "$(P)$(R)Set-Vexp")
  field (INPC, "$(P)$(R)Set-BuzzPitch")
  field (INPD, "$(P)$(R)Set-BuzzVol")
  field (INPE, "$(P)$(R)Set-InspExpState")
  field (INPF, 0)
  field (INPG, 0)
  field (CALC, "0")
  field (DTYP, "stream")
  field (OUT, "@arduino.proto WriteMsg $(PORT)")
}
